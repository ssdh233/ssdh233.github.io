---
layout: post
title: "雀圣纪念和NAGA用法简介"
date: 2023-01-04
category: 中文
tags: [麻雀]
---

<style>
    h3 {
        text-align: center;
    }
</style>

### 1

忘了是有什么契机，去年闲的无聊的时候就偶尔打几把雀魂。到了雀豪之后稍微重视了一下想着努力一下打到雀圣，然而泼盆大业不能荒废，晚上又要打格斗，就只能白天摸鱼时间偶尔打个一两把，打着打着又经常突然没动力突然放置上几个月。就这样龟速6个月玉间打了235场，终于在昨天升上去了！

<img style="width: 80%" src="{{ site.url }}/assets/2023-01-04/quesheng.jpg" alt="雀圣">

数据大概是这样:

<img style="width: 80%" src="{{ site.url }}/assets/2023-01-04/tongji.png" alt="玉间数据">

金也氪了一些，要不实在是没有动力玩这个游戏，虽然氪金也提升不了太多动力。说起麻将的动力问题，本人在多年前看天麻入坑天凤后，了解规则学习基础很快打到了特上四段，之后来到日本有机会打了几次实麻后再开天凤开始45升降，不满足于现状想着怎么也要打到凤卓，就开始找各种途径学习麻将。买了现麻，uzaku本等等一系列当时比较流行的参考书，也开设了麻将用推特账号请教别人问题。之后比较顺利地摆脱45升降打到了6段，到差点升凤的时候遇到一波恶调回到原点之后就没怎么再打了。失去动力的最主要原因就是，麻将这东西短期内很难“知道自己到底有没有进步”。

大部分游戏，比如音游和STG都有分数这种非常直接的反馈；对战游戏有rating和胜率，即使没有这些也很容易感受到自己技术上的进步。大部分麻将游戏虽然也有段位和rating，但是麻将的运气成分十分的严重，两个同水平的玩家在同一个级别的卓上打100战，结果都有可能大相径庭。而100战（东南）却是很多玩家打一个月才能达到的数字。也就是说，**麻将游戏基本不可能从短期的段位战的结果上看出来自己水平的变化**。那能不能像格斗游戏一样，去自己“感受"自己的进步呢？前期是完全可行的。比如一个刚开始的玩家役记不全只会去断幺，到后面可以根据自己的打点/牌型/场况/点数状况等等来做出一些比较基本的鸣牌判断，这个过程还是相对比较容易习得的，玩家在这个阶段可以相对快速的感受到自己的变化。但是到后期这个反馈会越来越难获得，比如刚开始的玩家可能会听到"无役愚形dora1基本要立直"，那"基本"的判断基准是什么？什么听牌强度/场况/点数下要选择dama？这种比较细腻的判断在麻将里比比皆是，然而想要知道"正确的答案"，亦或者是"大部分十段/天凤位玩家会去选择的答案"十分困难，特上玩家很难在短期内找出自己打牌的不足来针对性的提升，即使这条路已经有成百上千的凤卓玩家走过一遍了。

当时在特上打了大概三个月之后就感觉，虽然这么学习/反思下去半年~一年的时间内应该肯定可以达到凤卓升降的水平，不过效率实在是太太太太低了。有时间干这个不如多去做一些更有意义的事情，比如pop'n music。然而过了几年之后的现在，**情况完完全全转变了**。

### 2

最主要的改变就是麻将AI NAGA的出现。之前虽然有巨硬搞的suphx在特上打到十段（安定段位8.75），但是之后并没有开展相关的业务。NAGA开始的时候虽然只有特上安定6-7段的水平，不过经历了几次更新之后，也达成了特上十段，去年的版本的最后几个月的安定段位也在8段以上了（见下图）。最近又经历了几次更新，实力已经慢慢的追赶上了suphx，可以毫不犹豫的说比99%的特上玩家强，并且应该能打到凤卓的平均水平以上了。

<img style="width: 80%" src="{{ site.url }}/assets/2023-01-04/naga.png" alt="naga的安定段位">

不仅如此，NAGA还推出了牌谱解析的功能，不仅可以找出NAGA和玩家的打牌选择不同的地方，而且还会表示出NAGA认为的最佳选择候补和其他几个备选候补的差距。并且在每一场结束之后会根据正常玩家和NAGA选择打牌的偏离来计算出"NAGA度"和"恶手率"，可以从侧面反映出玩家的实力。

<figure>
  <img style="width: 80%" src="{{ site.url }}/assets/2023-01-04/NAGA1.png" alt="naga界面1">
  <figcaption>NAGA的使用界面，条越长就代表和NAGA认为的最佳选择的差距越小</figcaption>
</figure>


<figure>
  <img style="width: 80%" src="{{ site.url }}/assets/2023-01-04/NAGA2.png" alt="naga界面1">
  <figcaption>每局最后NAGA会表示出整场的NAGA度</figcaption>
</figure>

现在公认NAGA还没有到达顶级麻将玩家的水准，所以注意NAGA度并不是越高就越强。而且如果熟知NAGA的习性（比如像我这种跟着NAGA学的玩家），可以通过模仿NAGA的打法可以提高NAGA度，但是对麻将实力的强弱可能并没有太大影响。不过一般而言，NAGA度高的玩家比NAGA度低的玩家实力强的可能性还是很高的。比如NAGA官推就发表了天凤各个段位NAGA度和恶手率的比较

<div style="display:flex">
  <img style="width: 50%" src="https://pbs.twimg.com/media/Fg8GK6GaUAENwcB?format=jpg" alt="NAGA度">
  <img style="width: 50%" src="https://pbs.twimg.com/media/FhLWqP6aEAEqVTM?format=jpg" alt="恶手率">
</div>

### 3

从上个月NAGA分析custom牌谱的价格减半之后，我就开始把在雀魂打的每一场牌谱都丢给NAGA看了（下图）。NAGA度平均89.5，恶手率平均5%左右，因为我最近几百场一直在跟着NAGA学习，所以应该会有一些虚高，不过保守估计应该是有安定凤卓（天凤7~8段左右）的实力了。如果之后有空的话会去天凤刷个凤凰去证明一下。（顺带一提根据我自己的观察，雀魂玉卓玩家NAGA度平均大概80左右，跟天凤上级卓差不多。）

<figure>
  <img style="width: 80%" src="{{ site.url }}/assets/2023-01-04/ssdh233NAGA.png" alt="我的naga度">
  <figcaption>我的naga度</figcaption>
</figure>

顺带分享一下把雀魂的牌谱扔给NAGA的步骤

1. 安装浏览器插件[Tampermonkey](https://www.tampermonkey.net/)，完成后添加代码[downloadlogs.js](https://gist.githubusercontent.com/Equim-chan/875a232a2c1d31181df8b3a8704c3112/raw/a0533ae7a0ab0158ca9ad9771663e94b82b61572/downloadlogs.js)。这样在雀魂的牌谱界面按s键就可以下载牌谱的json文件了。
2. 把json文件丢给[在下写的web小程序](http://ssdh233.me/ssdh233-tools/mahjong-souls-haifu-converter)。会自动输出NAGA用的custom牌谱链接
3. 去[NAGA网站](https://naga.dmv.nico/naga_report/order_form/)选择「カスタム牌譜解析」，然后把刚才生成的那一堆链接丢过去。p.s. 可以一坨直接丢过去，不用一局一局丢。

### 4

接下来简单的分享一下这几个月我从NAGA学习到的东西。

第一点比较重要的就是，在不同状况下追求流局听牌大概可以冒多大的风险。之前弃和的时候总是从最安全的牌一个一个往外打，完全不顾自己手牌的形状。但是其实特别是在巡数不多的时候，去冒一点风险（比如有现物的时候去打28筋）保留自己的一向听去留下形式听牌的可能是完全可行的。虽然这还要看"通过的筋的数量"、"剩余牌的安全度"、"点数状况"、"立直家的打点期待"等等来综合考虑，但是无脑弃和很多情况下并不一定是最优解。

第二点就是牌效率。虽然我之前就对自己的牌效率很有自信，uzaku本也看了不少遍，但是实战的时候其实很多地方还是会有失误。没有NAGA的时候只能自己一点点的去找失误去反思，现在有了NAGA很容易就可以找出打的不太对的地方，就可以重新计算，思考，然后训练在"当时的情况下快速找到最优解"的思考方式。

然后就是序盘的手顺。估计很多特上玩家都会像我一样无脑牌效率，不管配牌是多好多坏。愚形较多向听落后并且打点低的配牌的时候，会发现NAGA经常会选择优先打中张牌，一边保持自己的手牌的安全度，一边去寻找全带/染手/七对子之类的可能性。当然并不是所有的时候都这么极端，但是可以明显地看出来在手牌比较差的情况下NAGA保留役牌的可能性很高。最开始学麻将的时候都是无脑28>役牌>19，但是什么时候役牌>28，什么时候役牌<19这种比较细的地方就很值得学习了。

不止上面列出来的这些，其实可以说在跟着NAGA学的这几个月，在几乎所有的技术上（立直判断，鸣牌判断，攻防判断等等，除了读延迟这种AI不会的）都得到了质的提高。有了NAGA之后打的这不到300个半庄的提升可能要比我之前从刚学麻将开始打的1000多个半庄的提升都要大得多。不过NAGA现在的实力也还有限，并不是说无脑跟NAGA学就可以达到麻将的顶峰，但是对至少还没有到安定凤卓水平的玩家来说，有NAGA的话学习效率会得到质变。对于已经达到安定凤卓还再往上追求突破的玩家，NAGA应该也会是一个非常有用的工具。希望能有一大批玩家通过AI迅速的提升水平，让网络麻将的水平再提高一个档次，这样天凤位就越来越难了>_>